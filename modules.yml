modules:
  mod_adhoc: {}
  mod_announce:
    access: admin
  mod_blocking: {}
  mod_caps: {}
  mod_carboncopy: {}
  mod_configure: {}
  mod_echo: {}
  mod_http_bind:
    max_inactivity: 60
  mod_irc:
    access: authenticated
    default_encoding: "utf-8"
  mod_last: {}
  mod_offline:
    access_max_user_messages: max_user_offline_messages
  mod_ping:
    send_pings: true
    ping_interval: 60
    timeout_action: kill
  mod_pres_counter:
    count: 5
    interval: 60
  mod_pubsub:
    access_createnode: local
    plugins:
      - "flat"
      - "hometree"
      - "pep"
  mod_privacy: {}
  mod_private: {}
  mod_proxy65:
    ip: "::"
    shaper: proxy_shaper
    max_connections: 10
    access: local
  mod_register:
    access: jabber_at
    captcha_protected: true
    registration_watchers:
      - "registration@jabber.at"
    welcome_message:
        subject: "Welcome to jabber.at!"
        body: |-
            Welcome to jabber.at, a Jabber service provided by the Fachschaft Informatik.
            
            For more information about this service as well as news and announcements,
            please visit https://jabber.at. If you need more information about jabber in
            general, see http://en.wikipedia.org/wiki/Jabber.
            
            Please register your E-Mail address at https://account.jabber.at/reset/email/
            if you want to be able to reset your password in case you loose it. Unused
            accounts will be deleted after 12 months of inactivity.
            
            Also follow our twitter account at https://twitter.com/jabber_at or on facebook
            at https://facebook.com/jabber.at - we provide fast service updates there,
            especially if our service happens to be unavailable.
  mod_roster:
    versioning: true
    store_current_id: true
  mod_sic: {}
  mod_sip: {}
  mod_stats: {}
  mod_time: {}
  mod_vcard: {}
  mod_vcard_xupdate: {}
  mod_version: {}

  # 3rd-party modules:
  mod_admin_extra: {}
  mod_muc_admin: {}

append_host_config:
  "jabber.at":
    modules:
      mod_disco:
        server_info:
          - modules: [mod_muc]
            name: "Chatroom logs"
            urls: ["https://jabber.at/logs"]
      mod_muc:
        access: everybody
        access_create: local
        access_admin: muc_admin
        moderated: false
        allow_user_invites: true
        max_user_conferences: 10
        min_message_interval: 1
        min_presence_interval: 5
      mod_muc_log:
        access_log: everybody
        timezone: local
        outdir: "/var/www/jabber.at/logs"
        file_permissions:
          mode: 644
          group: 33
        spam_prevention: true
      mod_webpresence:
        pixmaps_path: "/usr/share/ejabberd-mod-webpresence/pixmaps/"
        baseurl: "https://jabber.at/presence/"
        access: local

  "jabber.fsinf.at":
    modules:
      mod_disco:
        server_info:
          - modules: [mod_muc]
            name: "Chatroom logs"
            urls: ["http://jabber.at/logs"]
        extra_domains:
          - "conference.fsinf.at"
          - "conference.jabber.at"
          - "webpresence.jabber.at"

  "fsinf.at":
    modules:
      mod_disco:
        server_info:
          - modules: [mod_muc]
            name: "Chatroom logs"
            urls: ["http://jabber.at/logs"]
        extra_domains:
          - "conference.jabber.at"
          - "webpresence.jabber.at"
      mod_muc:
        access: everybody
        access_create: local
        access_admin: muc_admin
        moderated: false
        allow_user_invites: true
        min_message_interval: 1
        min_presence_interval: 5
      mod_muc_log:
        access_log: everybody
        timezone: local
        outdir: "/var/www/jabber.at/logs"
        file_permissions:
          mode: 644
          group: 33
        spam_prevention: true
  "jabber.wien":
    modules:
      mod_disco:
        server_info:
          - modules: [mod_muc]
            name: "Chatroom logs"
            urls: ["https://jabber.wien/logs"]
      mod_muc:
        access: everybody
        access_create: local
        access_admin: muc_admin
        moderated: false
        allow_user_invites: true
        max_user_conferences: 10
        min_message_interval: 1
        min_presence_interval: 5
      mod_muc_log:
        access_log: everybody
        timezone: local
        outdir: "/var/www/jabber.wien/logs"
        file_permissions:
          mode: 644
          group: 33
        spam_prevention: true
      mod_webpresence:
        pixmaps_path: "/usr/share/ejabberd-mod-webpresence/pixmaps/"
        baseurl: "https://jabber.wien/presence/"
        access: local
  "jabber.zone":
    modules:
      mod_disco:
        server_info:
          - modules: [mod_muc]
            name: "Chatroom logs"
            urls: ["https://jabber.zone/logs"]
      mod_muc:
        access: everybody
        access_create: local
        access_admin: muc_admin
        moderated: false
        allow_user_invites: true
        max_user_conferences: 10
        min_message_interval: 1
        min_presence_interval: 5
      mod_muc_log:
        access_log: everybody
        timezone: local
        outdir: "/var/www/jabber.zone/logs"
        file_permissions:
          mode: 644
          group: 33
        spam_prevention: true
      mod_webpresence:
        pixmaps_path: "/usr/share/ejabberd-mod-webpresence/pixmaps/"
        baseurl: "https://jabber.zone/presence/"
        access: local

modules:
  mod_adhoc: {}
  mod_admin_extra: {}
  mod_announce:
    access: admin
  mod_blocking: {}
  mod_caps: {}
  mod_carboncopy: {}
  mod_client_state:
    drop_chat_states: true
    queue_presence: true
  mod_configure: {}
  mod_echo: {}
  mod_fail2ban:
    c2s_max_auth_failures: 5
  mod_http_bind:
    max_inactivity: 300
  mod_http_upload:
    service_url: "https://account.jabber.at/share/slot/"
    max_size: 15728640 # 15 MiB
    rm_on_unregister: false
  mod_irc:
    access: authenticated
    default_encoding: "utf-8"
  mod_last: {}
  mod_mam:
    default: always
    request_activates_archiving: true
    assume_mam_usage: on_request
    db_type: sql
  mod_muc_admin: {}
# 2015-07-27: Disabled because of error messages and MUC-problems
# mod_multicast:
#    access: local
  mod_offline:
    access_max_user_messages: max_user_offline_messages
  mod_ping:
    send_pings: true
    ping_interval: 300
    timeout_action: kill
  mod_pres_counter:
    count: 5
    interval: 60
  mod_pubsub:
    access_createnode: local
    plugins:
      - "flat"
      - "hometree"
      - "pep"
  mod_privacy: {}
  mod_private: {}
  mod_proxy65:
    ip: "::"
    host: "proxy.jabber.at"
    hostname: "128.130.95.40"
    auth_type: anonymous
    shaper: proxy_shaper
    max_connections: 10
    access: local
  mod_register:
    access: register
    access_from: none
  mod_roster:
    versioning: true
    store_current_id: true
  mod_sic: {}
  mod_sip: {}
  mod_stats: {}
  mod_time: {}
  mod_vcard: {}
  mod_vcard_xupdate: {}
  mod_version: {}

  # 3rd-party modules:
  mod_webpresence:
    pixmaps_path: "/usr/share/ejabberd-mod-webpresence/pixmaps/"
    baseurl: "https://@HOST@/presence/"
    access: local

append_host_config:
  "jabber.at":
    modules:
      mod_disco:
        server_info:
          - modules: [mod_muc]
            name: "Chatroom logs"
            urls: ["https://jabber.at/logs"]
      mod_muc:
        access: everybody
        access_create: local
        access_admin: muc_admin
        min_message_interval: 1
        min_presence_interval: 5
        default_room_options: 'DEFAULT_ROOM_OPTIONS'
      mod_muc_log:
        access_log: everybody
        timezone: local
        outdir: "/var/www/jabber.at/sites/jabber.at/logs/"
        file_permissions:
          mode: 644
          group: 33
        spam_prevention: true

  "jabber.fsinf.at":
    modules:
      mod_disco: {}
      mod_webpresence:
        pixmaps_path: "/usr/share/ejabberd-mod-webpresence/pixmaps/"
        baseurl: "https://jabber.fsinf.at/presence/"
        access: local

  "fsinf.at":
    modules:
      mod_disco:
        server_info:
          - modules: [mod_muc]
            name: "Chatroom logs"
            urls: ["http://jabber.at/logs"]
        extra_domains: 'TRANSPORTS'
      mod_muc:
        access: everybody
        access_create: local
        access_admin: muc_admin
        min_message_interval: 1
        min_presence_interval: 5
        default_room_options: 'DEFAULT_ROOM_OPTIONS'
      mod_muc_log:
        access_log: everybody
        timezone: local
        outdir: "/var/www/jabber.at/sites/jabber.at/logs/"
        file_permissions:
          mode: 644
          group: 33
        spam_prevention: true

  "jabber.wien":
    modules:
      mod_disco:
        server_info:
          - modules: [mod_muc]
            name: "Chatroom logs"
            urls: ["https://jabber.wien/logs"]
        extra_domains: 'TRANSPORTS'
      mod_muc:
        access: everybody
        access_create: local
        access_admin: muc_admin
        min_message_interval: 1
        min_presence_interval: 5
        default_room_options: 'DEFAULT_ROOM_OPTIONS'
      mod_muc_log:
        access_log: everybody
        timezone: local
        outdir: "/var/www/jabber.at/sites/jabber.at/logs/"
        file_permissions:
          mode: 644
          group: 33
        spam_prevention: true

  "jabber.zone":
    modules:
      mod_disco:
        server_info:
          - modules: [mod_muc]
            name: "Chatroom logs"
            urls: ["https://jabber.zone/logs"]
        extra_domains: 'TRANSPORTS'
      mod_muc:
        access: everybody
        access_create: local
        access_admin: muc_admin
        min_message_interval: 1
        min_presence_interval: 5
        default_room_options: 'DEFAULT_ROOM_OPTIONS'
      mod_muc_log:
        access_log: everybody
        timezone: local
        outdir: "/var/www/jabber.at/sites/jabber.at/logs/"
        file_permissions:
          mode: 644
          group: 33
        spam_prevention: true

  "xmpp.zone":
    modules:
      mod_disco:
        server_info:
          - modules: [mod_muc]
            name: "Chatroom logs"
            urls: ["https://xmpp.zone/logs"]
        extra_domains: 'TRANSPORTS'
      mod_muc:
        access: everybody
        access_create: local
        access_admin: muc_admin
        min_message_interval: 1
        min_presence_interval: 5
        default_room_options: 'DEFAULT_ROOM_OPTIONS'
      mod_muc_log:
        access_log: everybody
        timezone: local
        outdir: "/var/www/jabber.at/sites/jabber.at/logs/"
        file_permissions:
          mode: 644
          group: 33
        spam_prevention: true

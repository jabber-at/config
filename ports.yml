listen: 
  # This still has to be tested, alternative is config file above
  - port: 4560
    ip: 'INTERNAL_IP'
    module: ejabberd_xmlrpc
    maxsessions: 10
    timeout: 5000
    access_commands:
      xmlrpc:
        commands:
          - register
          - set_last
          - check_account
          - check_password
          - change_password
          - send_message
          - registered_users
          - unregister
        options: []
  - ip: "::"
    port: 5061
    module: ejabberd_sip
    tls: true
    certfile: 'CERT_LOCATION'
    access: local
  - ip: "::"
    port: 5222
    module: ejabberd_c2s
    max_stanza_size: 131072
    shaper: c2s_shaper
    access: local
    starttls_required: true
    protocol_options: 'TLS_OPTIONS'
    ciphers: 'TLS_CIPHERS'
    dhfile: 'DHPARAM_LOCATION'
    # see https://www.ejabberd.im/faq/tcp
    resend_on_timeout: if_offline
    zlib: true
  - ip: "::"
    port: 5269
    module: ejabberd_s2s_in
  - ip: "127.0.0.1"
    port: 5281
    module: ejabberd_http
    web_admin: true
  - ip: "::"
    port: 5349
    module: ejabberd_stun
    tls: true
    certfile: 'CERT_LOCATION'
    use_turn: true
    turn_ip: "128.130.95.40"
    turn_min_port: 49152
    turn_max_port: 50000
    access: local
  # transports
  - ip: "127.0.0.1"
    port: 5401
    module: ejabberd_service
    hosts: 
      "icq.jabber.at": 
        password: 'ICQ_JABBER_AT_PASSWORD'
    access: local
  - ip: "127.0.0.1"
    port: 5402
    module: ejabberd_service
    hosts: 
      "facebook.jabber.at": 
        password: 'FACEBOOK_JABBER_AT_PASSWORD'
    access: local
  - ip: "127.0.0.1"
    port: 5403
    module: ejabberd_service
    hosts: 
      "aim.jabber.at": 
        password: 'AIM_JABBER_AT_PASSWORD'
    access: local
  - ip: "127.0.0.1"
    port: 5404
    module: ejabberd_service
    hosts: 
      "telegram.jabber.at": 
        password: 'TELEGRAM_JABBER_AT_PASSWORD'
    access: local
  - ip: "127.0.0.1"
    port: 5405
    module: ejabberd_service
    hosts: 
      "whatsapp.jabber.at": 
        password: 'WHATSAPP_JABBER_AT_PASSWORD'
    access: local
  # TLS-protected http services
  - ip: "::"
    port: 5443
    module: ejabberd_http
    request_handlers: 
      "presence": mod_webpresence
      "ws": ejabberd_http_ws
    access: webchat
    http_bind: true
    tls: true
    certfile: 'CERT_LOCATION'
    ciphers: 'TLS_CIPHERS'
    protocol_options: 'TLS_OPTIONS'
    dhfile: 'DHPARAM_LOCATION'
    websocket_timeout: 3600
# port 7777  is configured by mod_proxy65

outgoing_s2s_families: 
  - ipv6
  - ipv4

outgoing_s2s_port: 5269
outgoing_s2s_timeout: 10000
s2s_access: authenticated
s2s_certfile: 'CERT_LOCATION'
s2s_use_starttls: required
s2s_protocol_options: 'TLS_OPTIONS'
s2s_ciphers: 'TLS_CIPHERS'
s2s_dhfile: 'DHPARAM_LOCATION'

% Listened ports:
{listen, [
    % stun interface
    {5349, ejabberd_stun,   [{access, local}, {certfile, 'CERT_LOCATION'}]},

    % xmlrpc interface (i.e. used by https://jabber.at/register)
    {{4560, "127.0.0.1"}, 
     ejabberd_xmlrpc,       []},

    % Client to server connections:
    {5222, ejabberd_c2s,    [zlib, starttls_required, inet6,
                             {access, everybody}, {shaper, c2s_shaper},
                             % multiple vhosts: http://www.ejabberd.im/node/3096
                             %{certfile, 'CERT_LOCATION'},
                             {max_stanza_size, 65536}
                            ]},
    {5223, ejabberd_c2s,    [zlib, tls, inet6,
                             {access, everybody}, {shaper, c2s_shaper},
                             {certfile, 'CERT_LOCATION'},
                             {max_stanza_size, 65536}
                            ]},
    % server to server connections:
    {5269, ejabberd_s2s_in,  [inet6,
                              {access, everybody}, {shaper, s2s_shaper},
                              {max_stanza_size, 131072}]},
    
    % http-polling, http-binding, webpresence
    {5280, ejabberd_http,    [captcha, http_bind,
                              {access, local},
                              {request_handlers, 
                               [{["presence"], mod_webpresence}]}
                             ]},

    % admin-interface, see jabber.at:5281/admin (not available from the outside!)
    {{5281, "127.0.0.1"}, 
     ejabberd_http,         [web_admin]},

    % Transport:
    {{5401, "127.0.0.1"}, 
     ejabberd_service,      [{access, everybody},
                             {host, "icq.jabber.at",
                              [{password, 'ICQ_JABBER_AT_PASSWORD'}]}
                            ]},
    {{5403, "127.0.0.1"}, 
     ejabberd_service,      [{access, everybody},
                             {host, "aim.jabber.at",
                              [{password, 'AIM_JABBER_AT_PASSWORD'}]}
                            ]},
    {{5404, "127.0.0.1"}, 
     ejabberd_service,      [{access, everybody},
                             {host, "gg.jabber.at",
                              [{password, 'GG_JABBER_AT_PASSWORD'}]}
                            ]},
    {{5407, "127.0.0.1"},
     ejabberd_service,      [{access, everybody},
                             {host, "simple.jabber.at",
                              [{password, 'SIMPLE_JABBER_AT_PASSWORD'}]}
                            ]},
    {{5409, "127.0.0.1"},
     ejabberd_service,      [{access, everybody},
                             {host, "yahoo.jabber.at",
                              [{password, 'YAHOO_JABBER_AT_PASSWORD'}]}
                            ]}

    % Note that port 7777 is provided by mod_proxy65 and is not explicetly listed here.
]}.

% Use STARTTLS+Dialback for S2S connections
{s2s_use_starttls, required}.
{outgoing_s2s_options, [ipv6, ipv4], 10000}.
{s2s_certfile, 'CERT_LOCATION'}.

% If SRV lookup fails, then port 5269 is used to communicate with remote server
{outgoing_s2s_port, 5269}.

{domain_certfile, "jabber.at", 'CERT_LOCATION_JABBER_AT'}.
{domain_certfile, "fsinf.at", 'CERT_LOCATION_FSINF_AT'}.
{domain_certfile, "jabber.fsinf.at", 'CERT_LOCATION_JABBER_FSINF_AT'}.
